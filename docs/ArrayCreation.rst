.. _arrayCreation:

Array Creation
==============
.. **intro start**

| JZarr has several functions for creating arrays.
| Arrays can be created with or without a given storage.
| If no storage is given a default in memory store will be used instead.
| Arrays can be created with or without additional user defined attributes.

| At least there is only one mandatory information which must be given at creation time.
| To create an instance of com.bc.zarr.ZarrArray at least a shape must be given

.. (highlight:: java)

Simple small array
------------------

.. literalinclude:: ../src/main/examples/array/creation/InMemoryArray.java
  :language: java
  :caption: `snippet 1 from InMemoryArray.java <https://github.com/bcdev/jzarr/blob/master/src/main/examples/array/creation/InMemoryArray.java>`_
  :start-after: snippet 1
  :end-before: end 1
  :dedent: 8

A :code:`System.out.println(array);` then creates the following output::

 com.bc.zarr.ZarrArray{shape=[10, 8], chunks=[10, 8], dataType=f8, fillValue=0, compressor=zlib/level=1, store=InMemoryStore, byteOrder=BIG_ENDIAN}
The output describes that an array with the following characteristics has been created

=================  ==========================================
property           value
=================  ==========================================
shape dimensions   y:10 x:8
chunks dimensions  also y:10 x:8
data type          :ref:`f8 <data-types>` :code:`default`
data type          :ref:`f8 <dtype>` :code:`default`
fill value         :code:`0` :code:`default`
compressor         zlib compressor with level 1 :code:`default`
store              InMemoryStore :code:`default`
byte order         BIG_ENDIAN :code:`default`
=================  ==========================================

Why are chunks dimensions the same as shape dimension?
  | If chunks is not given, the default chunks, with a size of 512 in each dimension, will be applied.
  | If a chunk dimension is bigger than a shape dimension itself, the chunk dimension will be trimmed to shape.

Array with automatically computed chunk size
--------------------------------------------

.. literalinclude:: ../src/main/examples/array/creation/InMemoryArray.java
  :language: java
  :caption: `snippet 2 from InMemoryArray.java <https://github.com/bcdev/jzarr/blob/master/src/main/examples/array/creation/InMemoryArray.java>`_
  :start-after: snippet 2
  :end-before: end 2
  :dedent: 8

A :code:`System.out.println(array);` then creates the following output::

 com.bc.zarr.ZarrArray{shape=[4000, 3500], chunks=[500, 500], dataType=f8, fillValue=0, compressor=zlib/level=1, store=InMemoryStore, byteOrder=BIG_ENDIAN}
As you can see now, the chunk size in both dimensions is 500. This is an autogenerated chunk size.

Array with disabled chunking
----------------------------

.. literalinclude:: ../src/main/examples/array/creation/InMemoryArray.java
  :language: java
  :caption: `snippet 3 from InMemoryArray.java <https://github.com/bcdev/jzarr/blob/master/src/main/examples/array/creation/InMemoryArray.java>`_
  :start-after: snippet 3
  :end-before: end 3
  :dedent: 8

A :code:`System.out.println(array);` then creates the following output::

 com.bc.zarr.ZarrArray{shape=[4000, 3500], chunks=[4000, 3500], dataType=f8, fillValue=0, compressor=zlib/level=1, store=InMemoryStore, byteOrder=BIG_ENDIAN}
Now you can see, the chunk size ins the same as shape size.
